
{{#each errors}}
 <div class="alert alert-danger alert-dismissible fade show" role="alert">
   {{text}}
 <button type="button" class="close" data-dismiss="alert" aria-label="Close">
   <span aria-hidden="true">&times;</span>
 </button>
 </div>


{{/each}}



<div class="col-md-4 mx-auto">
  <div class="card">
    <div class="card-header">
      <h3>Nuevo Anuncio</h3>
    </div>
    <div class="card-body">
      <form action="publicarAnuncio" method="post">
        <div>
          <input type="text" name="title" class="form-control tituloDeAnuncio" placeholder="Inserte un titulo" autofocus>
          <input type="number" name="price" min="0" max="10000" step="0.1" class="form-control precio" placeholder="Precio">
          <input type="file" id="file" name="imgUrl" onchange="return fileValidation()" class="distancia"/>
        </div>
        <div id="imagePreview"  class="distancia" ></div>
        <div class="form-group">
          <textarea name="description" class="form-control" placeholder="Describe tu anuncio"></textarea>
        </div>



        <div class="form-group">
          <button class="btn btn-primary btn-block" type="submit">Crear anuncio</button>

        </div>
      </form>
    </div>
  </div>
</div>

<style>
  .distancia {
    padding: 2%;
  }
  .distancia img {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }
  .tituloDeAnuncio {
    max-width: 60%;
    float:left;
    margin-right: 5%;

  }
  .precio {
    max-width: 30%;
    float:left;
    padding-left: 5%;

  }


</style>
<script type="text/javascript">
function fileValidation(){
    var fileInput = document.getElementById('file');
    var filePath = fileInput.value;
    var allowedExtensions = /(.jpg|.jpeg|.png|.gif)$/i;
    if(!allowedExtensions.exec(filePath)){
        alert('Please upload file having extensions .jpeg/.jpg/.png/.gif only.');
        fileInput.value = '';
        return false;
    }else{
        //Image preview
        if (fileInput.files && fileInput.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('imagePreview').innerHTML = '<img src="'+e.target.result+'"/>';
            };
            reader.readAsDataURL(fileInput.files[0]);
        }
    }
}
</script>
